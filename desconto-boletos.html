
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desconto em Boletos - Economize at√© 90% | Resolvi R$4,97</title>
    <!-- SEO otimizado -->
    <meta name="description" content="Guia completo para negociar descontos em boletos atrasados. Telefones diretos + frases prontas + passo a passo. Apenas R$4,97.">
    
    <!-- Mercado Pago SDK -->
    <script src="https://sdk.mercadopago.com/js/v2"></script>
    
    <style>
        /* ESTILOS COMPLETOS OTIMIZADOS */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: white;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container { max-width: 800px; margin: 0 auto; }
        
        /* HEADER */
        .header { 
            text-align: center; 
            padding: 30px 20px; 
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            margin-bottom: 30px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .logo { 
            font-size: 42px; 
            font-weight: 800; 
            margin-bottom: 10px; 
            background: linear-gradient(90deg, #28a745, #20c997); 
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent; 
        }
        
        .price-tag {
            background: linear-gradient(135deg, #28a745, #20c997);
            padding: 15px 30px;
            border-radius: 50px;
            display: inline-block;
            font-size: 24px;
            font-weight: bold;
            margin: 20px 0;
            box-shadow: 0 10px 20px rgba(40, 167, 69, 0.3);
        }
        
        /* CALCULADORA */
        .calculator {
            background: rgba(255,255,255,0.08);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 25px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .input-group { margin-bottom: 20px; }
        .input-group label { display: block; margin-bottom: 8px; font-weight: 600; }
        .input-group input, .input-group select {
            width: 100%;
            padding: 15px;
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 10px;
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 16px;
        }
        
        /* CHECKOUT */
        .checkout-section {
            text-align: center;
            padding: 30px;
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            margin: 30px 0;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .buy-button {
            background: linear-gradient(135deg, #009FE3, #00B2FF);
            color: white;
            border: none;
            padding: 20px 40px;
            font-size: 20px;
            font-weight: bold;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            margin: 20px 0;
            display: inline-block;
        }
        
        .buy-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(0, 159, 227, 0.3);
        }
        
        /* CONTE√öDO PREMIUM (inicialmente oculto) */
        .premium-content {
            display: none;
            background: rgba(255,255,255,0.05);
            padding: 30px;
            border-radius: 15px;
            margin-top: 30px;
            border: 1px solid rgba(40, 167, 69, 0.3);
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .empresa-categoria {
            background: rgba(255,255,255,0.03);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #28a745;
        }
        
        .tel-link {
            display: block;
            padding: 12px 15px;
            background: rgba(255,255,255,0.08);
            border-radius: 8px;
            margin: 10px 0;
            color: #4dabf7;
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .tel-link:hover {
            background: rgba(255,255,255,0.15);
            transform: translateX(5px);
        }
        
        /* RESPONSIVO */
        @media (max-width: 768px) {
            .logo { font-size: 32px; }
            .price-tag { font-size: 20px; padding: 12px 25px; }
            .buy-button { padding: 18px 30px; font-size: 18px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- HEADER -->
        <header class="header">
            <div class="logo">RESOLVI</div>
            <h1>DESCONTO EM BOLETOS ATRASADOS</h1>
            <p>Guia completo para negociar at√© 90% de desconto</p>
            
            <div class="price-tag">
                üöÄ APENAS R$ 4,97 (√öNICA VEZ)
            </div>
            
            <p><strong>Economize at√© R$920</strong> em contas atrasadas</p>
            <p>Menos de <strong>R$0,16 por dia</strong> pelo resto do ano</p>
        </header>
        
        <!-- CALCULADORA -->
        <section class="calculator">
            <h2>üìä CALCULE SUA ECONOMIA POTENCIAL</h2>
            
            <div class="input-group">
                <label for="valorConta">üíµ Valor original da conta:</label>
                <input type="number" id="valorConta" placeholder="Ex: 350,00" step="0.01" min="10">
            </div>
            
            <div class="input-group">
                <label for="diasAtraso">üìÖ Dias de atraso:</label>
                <select id="diasAtraso">
                    <option value="30">At√© 30 dias (desconto at√© 40%)</option>
                    <option value="60">31 a 60 dias (desconto at√© 50%)</option>
                    <option value="90">61 a 90 dias (desconto at√© 60%)</option>
                    <option value="180">91 a 180 dias (desconto at√© 70%)</option>
                    <option value="365">Mais de 180 dias (desconto at√© 80%)</option>
                </select>
            </div>
            
            <div class="input-group">
                <label for="tipoConta">üè¢ Tipo de conta:</label>
                <select id="tipoConta">
                    <option value="energia">Energia El√©trica</option>
                    <option value="agua">√Ågua e Esgoto</option>
                    <option value="telefone">Telefone/Internet</option>
                    <option value="gas">G√°s Natural</option>
                    <option value="cartao">Cart√£o de Cr√©dito</option>
                </select>
            </div>
            
            <button class="buy-button" onclick="calcularEconomia()">
                üßÆ CALCULAR MINHA ECONOMIA
            </button>
            
            <div id="resultadoCalculo" style="display: none; margin-top: 20px; padding: 20px; background: rgba(40, 167, 69, 0.1); border-radius: 10px;">
                <h3>üéØ SUA ECONOMIA POTENCIAL: <span id="valorEconomia">R$ 0,00</span></h3>
                <p>√â isso que voc√™ pode economizar negociando!</p>
            </div>
        </section>
        
        <!-- CHECKOUT -->
        <section class="checkout-section" id="checkoutSection" style="display: none;">
            <h2>üéÅ ACESSE O MATERIAL COMPLETO</h2>
            <p><strong>Por apenas R$4,97 voc√™ recebe:</strong></p>
            
            <ul style="text-align: left; margin: 20px 0; padding-left: 20px;">
                <li>‚úÖ 25+ telefones diretos (setor de cobran√ßa)</li>
                <li>‚úÖ Frases prontas que funcionam</li>
                <li>‚úÖ Passo a passo de 7 dias</li>
                <li>‚úÖ Dicas secretas dos atendentes</li>
                <li>‚úÖ Modelos de email/WhatsApp</li>
            </ul>
            
            <button class="buy-button" id="checkoutButton" onclick="iniciarCheckout()">
                üí∞ PAGAR R$4,97 VIA MERCADO PAGO
            </button>
            
            <div id="wallet_container" style="margin-top: 20px;"></div>
            
            <p style="margin-top: 15px; font-size: 14px; opacity: 0.8;">
                Pagamento 100% seguro via Mercado Pago<br>
                PIX, cart√£o, boleto | Conte√∫do liberado automaticamente
            </p>
        </section>
        
        <!-- CONTE√öDO PREMIUM (liberado ap√≥s pagamento) -->
        <section class="premium-content" id="premiumContent">
            <h2>üéâ MATERIAL COMPLETO LIBERADO!</h2>
            <p style="margin-bottom: 25px;">Aqui est√° tudo que voc√™ precisa para economizar:</p>
            
            <!-- Conte√∫do real aqui -->
            <div class="empresa-categoria">
                <h3>‚ö° Energia El√©trica</h3>
                <a href="tel:08007281960" class="tel-link">üìû Enel: 0800 728 1960 (Cobran√ßa)</a>
                <a href="tel:0800701701" class="tel-link">üìû Light: 0800 070 1701</a>
                <a href="tel:0800701010" class="tel-link">üìû Cemig: 0800 701 010</a>
                <p><strong>Melhor hor√°rio:</strong> Ter√ßa-feira, 10h-12h</p>
                <p><strong>Frase pronta:</strong> "Boa tarde, preciso negociar minha conta de luz atrasada. Posso pagar √† vista via PIX agora mesmo."</p>
            </div>
            
            <div class="empresa-categoria">
                <h3>üíß √Ågua e Esgoto</h3>
                <a href="tel:08000550195" class="tel-link">üìû Sabesp: 0800 055 0195</a>
                <a href="tel:08002850195" class="tel-link">üìû Copasa: 0800 285 0195</a>
                <p><strong>Dica:</strong> Pe√ßa para falar com o setor de "negocia√ß√£o comercial"</p>
            </div>
            
            <!-- Mais categorias... -->
            
            <div style="background: rgba(40, 167, 69, 0.1); padding: 25px; border-radius: 10px; margin-top: 30px;">
                <h3>üìã PASSO A PASSO COMPLETO</h3>
                <ol style="margin-top: 15px; padding-left: 20px;">
                    <li><strong>Dia 1:</strong> Prepare seus documentos (RG, CPF, conta)</li>
                    <li><strong>Dia 2:</strong> Ligue no hor√°rio indicado acima</li>
                    <li><strong>Dia 3:</strong> Use as frases prontas (copia e cola)</li>
                    <li><strong>Dia 4:</strong> Se negarem, pe√ßa supervisor</li>
                    <li><strong>Dia 5:</strong> Feche acordo e pe√ßa email de confirma√ß√£o</li>
                    <li><strong>Dia 6:</strong> Pague via PIX e guarde comprovante</li>
                    <li><strong>Dia 7:</strong> Verifique se desconto foi aplicado</li>
                </ol>
            </div>
        </section>
        
        <!-- STATUS DO PAGAMENTO -->
        <div id="paymentStatus" style="display: none; text-align: center; padding: 20px; margin: 20px 0; background: rgba(0, 159, 227, 0.1); border-radius: 10px;">
            <h3>‚è≥ AGUARDANDO CONFIRMA√á√ÉO DO PAGAMENTO...</h3>
            <p>Verificando a cada 10 segundos. Assim que confirmado, o conte√∫do ser√° liberado automaticamente!</p>
            <div class="loading" style="margin: 20px auto; width: 40px; height: 40px; border: 4px solid rgba(255,255,255,0.1); border-top: 4px solid #009FE3; border-radius: 50%; animation: spin 1s linear infinite;"></div>
        </div>
        
        <style>
            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
        </style>
        
        <!-- FOOTER -->
        <footer style="text-align: center; margin-top: 50px; padding: 30px; border-top: 1px solid rgba(255,255,255,0.1); font-size: 14px; opacity: 0.7;">
            <p>¬© 2024 Resolvi. Para fins educativos.</p>
            <p>Consulte profissionais para decis√µes financeiras importantes.</p>
        </footer>
    </div>

    <!-- MERCADO PAGO INTEGRATION -->
    <script>
        // SUAS CREDENCIAIS MERCADO PAGO
        const MP_PUBLIC_KEY = "3991070981837382";
        const MP_ACCESS_TOKEN = "kQcYVjXWrmx4mYYBXqXG2bWkcnwF51nY";
        
        // PIPEDREAM WEBHOOK
        const PIPEDREAM_WEBHOOK = "https://eoxe1sdz3wqj8s6.m.pipedream.net";
        
        // Estado global
        let mercadoPago;
        let currentPaymentId = null;
        let paymentCheckInterval = null;
        
        // Inicializar Mercado Pago
        document.addEventListener('DOMContentLoaded', function() {
            // Inicializar SDK Mercado Pago
            const mp = new MercadoPago(MP_PUBLIC_KEY, {
                locale: 'pt-BR'
            });
            
            // Criar brick de checkout
            mercadoPago = mp;
            
            // Verificar se j√° pagou (para retorno)
            checkExistingPayment();
        });
        
        // CALCULADORA DE ECONOMIA
        function calcularEconomia() {
            const valor = parseFloat(document.getElementById('valorConta').value);
            const dias = parseInt(document.getElementById('diasAtraso').value);
            const tipo = document.getElementById('tipoConta').value;
            
            if (!valor || valor < 10) {
                alert("Digite um valor v√°lido (m√≠nimo R$ 10)");
                return;
            }
            
            // C√°lculo do desconto
            let descontoPercentual = 0;
            if (dias <= 30) descontoPercentual = 40;
            else if (dias <= 60) descontoPercentual = 50;
            else if (dias <= 90) descontoPercentual = 60;
            else if (dias <= 180) descontoPercentual = 70;
            else descontoPercentual = 80;
            
            // Economia em reais
            const economia = (valor * descontoPercentual / 100).toFixed(2);
            
            // Mostrar resultado
            document.getElementById('valorEconomia').textContent = `R$ ${economia.replace('.', ',')}`;
            document.getElementById('resultadoCalculo').style.display = 'block';
            document.getElementById('checkoutSection').style.display = 'block';
            
            // Scroll para checkout
            document.getElementById('checkoutSection').scrollIntoView({ behavior: 'smooth' });
            
            console.log(`Economia calculada: R$ ${economia}`);
        }
        
        // INICIAR CHECKOUT MERCADO PAGO
        async function iniciarCheckout() {
            try {
                // Gerar ID √∫nico para o pagamento
                const paymentId = 'DESC-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
                currentPaymentId = paymentId;
                
                // Criar prefer√™ncia de pagamento
                const response = await fetch(PIPEDREAM_WEBHOOK + '/create-preference', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        public_key: MP_PUBLIC_KEY,
                        access_token: MP_ACCESS_TOKEN,
                        payment_id: paymentId,
                        amount: 4.97,
                        title: "Guia Desconto em Boletos - Resolvi",
                        description: "25+ telefones diretos + Frases prontas + Passo a passo completo"
                    })
                });
                
                const data = await response.json();
                
                if (data.preference_id) {
                    // Inicializar checkout
                    const bricksBuilder = mercadoPago.bricks();
                    
                    await bricksBuilder.create("wallet", "wallet_container", {
                        initialization: {
                            preferenceId: data.preference_id,
                        },
                        callbacks: {
                            onReady: () => {
                                console.log("Checkout Mercado Pago pronto!");
                            },
                            onSubmit: (formData) => {
                                // Pagamento iniciado
                                console.log("Pagamento iniciado:", formData);
                                mostrarAguardandoPagamento();
                                iniciarVerificacaoPagamento(paymentId);
                                return Promise.resolve();
                            },
                            onError: (error) => {
                                console.error("Erro no checkout:", error);
                                alert("Erro no processamento do pagamento. Tente novamente.");
                            }
                        }
                    });
                } else {
                    throw new Error("Erro ao criar prefer√™ncia");
                }
                
            } catch (error) {
                console.error("Erro no checkout:", error);
                alert("Erro ao processar pagamento. Tente novamente.");
            }
        }
        
        // MOSTRAR STATUS "AGUARDANDO PAGAMENTO"
        function mostrarAguardandoPagamento() {
            document.getElementById('paymentStatus').style.display = 'block';
            document.getElementById('checkoutSection').style.display = 'none';
            document.getElementById('paymentStatus').scrollIntoView({ behavior: 'smooth' });
        }
        
        // INICIAR VERIFICA√á√ÉO DO PAGAMENTO
        function iniciarVerificacaoPagamento(paymentId) {
            // Verificar a cada 10 segundos
            paymentCheckInterval = setInterval(() => {
                verificarStatusPagamento(paymentId);
            }, 10000);
            
            // Verificar imediatamente tamb√©m
            verificarStatusPagamento(paymentId);
        }
        
        // VERIFICAR STATUS DO PAGAMENTO
        async function verificarStatusPagamento(paymentId) {
            try {
                const response = await fetch(PIPEDREAM_WEBHOOK + '/check-payment?payment_id=' + paymentId);
                const data = await response.json();
                
                if (data.status === 'approved') {
                    // PAGAMENTO APROVADO!
                    clearInterval(paymentCheckInterval);
                    liberarConteudoPremium();
                } else if (data.status === 'rejected' || data.status === 'cancelled') {
                    // PAGAMENTO REJEITADO
                    clearInterval(paymentCheckInterval);
                    alert("Pagamento n√£o aprovado. Tente novamente.");
                    location.reload();
                }
                // Se ainda pending, continua verificando
                
            } catch (error) {
                console.error("Erro ao verificar pagamento:", error);
            }
        }
        
        // LIBERAR CONTE√öDO PREMIUM
        function liberarConteudoPremium() {
            document.getElementById('paymentStatus').style.display = 'none';
            document.getElementById('premiumContent').style.display = 'block';
            document.getElementById('premiumContent').scrollIntoView({ behavior: 'smooth' });
            
            // Salvar no localStorage que j√° pagou
            localStorage.setItem('resolvi_pago', 'true');
            localStorage.setItem('resolvi_payment_id', currentPaymentId);
            
            console.log("Conte√∫do premium liberado!");
        }
        
        // VERIFICAR SE J√Å PAGOU (para retorno ap√≥s pagamento)
        function checkExistingPayment() {
            const jaPagou = localStorage.getItem('resolvi_pago');
            const paymentId = localStorage.getItem('resolvi_payment_id');
            
            if (jaPagou === 'true' && paymentId) {
                // J√° pagou antes, liberar conte√∫do
                document.getElementById('premiumContent').style.display = 'block';
                document.getElementById('checkoutSection').style.display = 'none';
                console.log("Conte√∫do j√° liberado anteriormente");
            }
            
            // Verificar se voltou com par√¢metro de sucesso
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.has('payment') && urlParams.get('payment') === 'success') {
                mostrarAguardandoPagamento();
                iniciarVerificacaoPagamento('pending-' + Date.now());
            }
        }
        
        // COPIAR TEXTO
        function copiarTexto(texto) {
            navigator.clipboard.writeText(texto)
                .then(() => alert("Texto copiado! Cole no WhatsApp/ligacao."))
                .catch(() => alert("Erro ao copiar. Selecione e copie manualmente."));
        }
    </script>
</body>
</html>
